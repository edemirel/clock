<!DOCTYPE html>
<html>
<head>

<title>Text Clock</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- <link href='http://fonts.googleapis.com/css?family=Lato:300,900' rel='stylesheet' type='text/css'> -->
<link href='http://fonts.googleapis.com/css?family=Cousine:400,700' rel='stylesheet' type='text/css'>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<script>

function startTime() {
	var today = new Date();
	var h = today.getHours();
	var m = today.getMinutes();
	if (m === 0) {
		ctt0(h, m);
	} else if (m > 0 && m < 15) {
		ctt1(h, m);
	} else if (m === 15) {
		ctt2(h, m);
	} else if (m > 15 && m < 30) {
		ctt3(h, m);
	} else if (m === 30) {
		ctt4(h, m);
	} else if (m > 30 && m < 45) {
		ctt3(h, m);
	} else if (m === 45) {
		ctt6(h, m);
	} else if (m > 45 && m <= 49) {
		ctt3(h, m);
	} else if (m >= 50 && m <= 59) {
		ctt8(h, m);
	}
}

function fetchText(word, block) {
	$.getJSON("js/"+word+".json", function(json) {
		var rand = Math.floor(Math.random() * json.length);
		document.getElementById(block).innerHTML = json[rand];
	});
}

function theTimeIs() {
	var itisX = Math.random();
	if (itisX >= 0.5) {
		fetchText("the time is", "itis");
	} else {
		fetchText("it is", "itis");
	}
}

function ctt0(hour, minute) {
	theTimeIs();

	if (hour === 0) {
		fetchText("midnight", "blk1");	
	}
	else if (hour === 12) {
		fetchText("noon", "blk1");
	}
	else {
		var hr = hour;
		if (hour > 12) {
			hr = hour - 12;
		}
		fetchText(hr, "blk1");
	}

	if (hour != 0 && hour != 12) {
		fetchText("o\'clock", "blk2");

		if (hour < 12) {
			fetchText("in the morning", "blk3");
		} 
		else if (hour > 17) {
			fetchText("in the evening", "blk3");
		}
		else {
			fetchText("in the afternoon", "blk3");
		}
	}

	document.getElementById("blk4").innerHTML = "";
	document.getElementById("blk5").innerHTML = "";
	document.getElementById("blk6").innerHTML = "";

}

function ctt1(hour, minute) {
	theTimeIs();

	fetchText(minute, "blk1");

	var m = "minutes";
	if (minute === 1) {
		m = "minute";
	}
	fetchText(m, "blk2");

	var ap = "after";
	if (Math.random() >= 0.5) {
		ap = "past";
	}
	fetchText(ap, "blk3");

	if (hour === 0) {
		fetchText("midnight", "blk4");	
	}
	else if (hour === 12) {
		fetchText("noon", "blk4");
	}
	else {
		var hr = hour;
		if (hour > 12) {
			hr = hour - 12;
		}
		fetchText(hr, "blk4");
	}

	if (hour != 0 && hour != 12) {
		fetchText("o\'clock", "blk5");

		if (hour < 12) {
			fetchText("in the morning", "blk6");
		} 
		else if (hour > 17) {
			fetchText("in the evening", "blk6");
		}
		else {
			fetchText("in the afternoon", "blk6");
		}
	}
}

function ctt2(hour, minute) {
	theTimeIs();

	fetchText("quarter", "blk1");

	var ap = "after";
	if (Math.random() >= 0.5) {
		ap = "past";
	}
	fetchText(ap, "blk2");

	if (hour === 0) {
		fetchText("midnight", "blk3");	
	}
	else if (hour === 12) {
		fetchText("noon", "blk3");
	}
	else {
		var hr = hour;
		if (hour > 12) {
			hr = hour - 12;
		}
		fetchText(hr, "blk3");
	}

	if (hour != 0 && hour != 12) {
		fetchText("o\'clock", "blk4");

		if (hour < 12) {
			fetchText("in the morning", "blk5");
		} 
		else if (hour > 17) {
			fetchText("in the evening", "blk5");
		}
		else {
			fetchText("in the afternoon", "blk5");
		}
	}

	document.getElementById("blk6").innerHTML = "";
}

function ctt3(hour, minute) {
	theTimeIs();

	var hr = hour;
	if (hour === 0) {
		hr = 12;
	} else if (hour > 12) {
		hr = hour - 12;
	}
	fetchText(hr, "blk1");

	fetchText(minute, "blk2");

	if (hour != 0 && hour != 12) {
		if (hour < 12) {
			fetchText("in the morning", "blk3");
		} 
		else if (hour > 17) {
			fetchText("in the evening", "blk3");
		}
		else {
			fetchText("in the afternoon", "blk3");
		}
	}
	else {
		if (hour === 0) {
			fetchText("ante meridiem", "blk3");
		} 
		else if (hour === 12) {
			fetchText("post meridiem", "blk3");
		}
	}

	document.getElementById("blk4").innerHTML = "";
	document.getElementById("blk5").innerHTML = "";
	document.getElementById("blk6").innerHTML = "";
}

function ctt4(hour, minute) {
	theTimeIs();

	fetchText("half", "blk1");

	fetchText("past", "blk2");

	if (hour === 0) {
		fetchText("midnight", "blk3");	
	}
	else if (hour === 12) {
		fetchText("noon", "blk3");
	}
	else {
		var hr = hour;
		if (hour > 12) {
			hr = hour - 12;
		}
		fetchText(hr, "blk3");
	}

	if (hour != 0 && hour != 12) {
		fetchText("o\'clock", "blk4");

		if (hour < 12) {
			fetchText("in the morning", "blk5");
		} 
		else if (hour > 17) {
			fetchText("in the evening", "blk5");
		}
		else {
			fetchText("in the afternoon", "blk5");
		}
	}

	document.getElementById("blk6").innerHTML = "";
}

function ctt6(hour, minute) {
	theTimeIs();

	fetchText("quarter", "blk1");

	var tu = "to";
	if (Math.random() >= 0.5) {
		tu = "until";
	}
	fetchText(tu, "blk2");

	if (hour === 11) {
		fetchText("noon", "blk3");
	}
	else if (hour === 23) {
		fetchText("midnight", "blk3");
	}
	else {
		var hr = hour + 1;
		if (hour > 11) {
			hr = hour - 11;
		}
		fetchText(hr, "blk3");

		fetchText("o\'clock", "blk4");

		if (hour <= 10) {
			fetchText("in the morning", "blk5");
		} else if (hour >= 17) {
			fetchText("in the evening", "blk5");
		} else {
			fetchText("in the afternoon", "blk5");
		}
	}

	document.getElementById("blk6").innerHTML = "";
}

function ctt8(hour, minute) {
	theTimeIs();

	fetchText(60-minute, "blk1");

	var m = "minutes";
	if (minute === 59) {
		m = "minute";
	}
	fetchText(m, "blk2");

	var tu = "to";
	if (Math.random() >= 0.5) {
		tu = "until";
	}
	fetchText(tu, "blk3");

	if (hour === 11) {
		fetchText("noon", "blk4");
	}
	else if (hour === 23) {
		fetchText("midnight", "blk4");
	}
	else {
		var hr = hour + 1;
		if (hour > 11) {
			hr = hour - 11;
		}
		fetchText(hr, "blk4");

		fetchText("o\'clock", "blk5");

		if (hour <= 10) {
			fetchText("in the morning", "blk6");
		} else if (hour >= 17) {
			fetchText("in the evening", "blk6");
		} else {
			fetchText("in the afternoon", "blk6");
		}
	}
}

function checkMinute() {
	var minute = new Date().getMinutes();
	if (minute != currentMinute) {
		currentMinute = minute;
		startTime();
	}
}

var currentMinute = new Date().getMinutes();

$(function() {
	startTime();
	setInterval(checkMinute, 100);
});

</script>

<style>

body {
	margin: 10px 25px 35px 25px;
	background-color: #F2F1EF;
}

.clockblock {
/*	display: inline-block;
	width: 16%;
	height: auto;*/
	margin: 1em;
	font-family: 'Cousine', sans-serif;
	font-weight: 400;
	color: #333333;
}

.clocktext {
	color: #F22613;
	font-weight: 700;
	font-size: 22px;
	line-height: 0px;
}

#footer {
	font-family: 'Cousine', sans-serif;
	font-weight: 400;
	color: #333333;
	margin: 1em;
	margin-top: 50px;
}

.footergraf {
	margin-left: 25px;
}

</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50113889-8', 'auto');
  ga('send', 'pageview');

</script>

</head>
<body>

<div id="clockbox">

<div class="clockblock" id="itis"></div>
<div class="clockblock" id="blk1"></div>
<div class="clockblock" id="blk2"></div>
<div class="clockblock" id="blk3"></div>
<div class="clockblock" id="blk4"></div>
<div class="clockblock" id="blk5"></div>
<div class="clockblock" id="blk6"></div>

</div>

<div id="footer">

<table class="table">

<tr><td>

<p class="footergraf">Text Clock by <a href="http://rossgoodwin.com" target="_blank">Ross Goodwin</a>, 2014</p>
<p class="footergraf">All text sourced from <a href="http://www.gutenberg.org/" target="_blank">Project Gutenberg</a> ebooks</p>

</td></tr>

</table>

</div>


</body>
</html>